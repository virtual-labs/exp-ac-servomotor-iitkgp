<!-- This HTML page and script files are developed by
    Piyali Chattopadhyay
    Project Scientist-Technical,
    Virtual Labs IIT Kharagpur.-->

<!DOCTYPE html>
<html lang="en"><!--html tag start-->
<head>
    <title>Determination of the incremental transfer function of an AC Servomotor</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
  
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <!--<script  src="./js/AC_SERVO_MOTOR.js">   </script>-->
  <script  src="./js/AC_Servo.js"></script>
  
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-Knob/1.2.13/jquery.knob.min.js"></script>-->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.2.1/math.js"></script>
  <script src=" https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.2.1/math.min.js  "></script>
 <script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>

<script src="https://canvasjs.com/assets/script/canvasjs.min.js"> </script>
<link rel="stylesheet" href="./css/demo.css">
<link rel="stylesheet" href="./css/AC_SERVO_MOTOR.css">

	


  <style>
	<!-- .bluedot{
	position:absolute;
    border: 2px solid blue;
    border-radius:50%;
    background-color:blue;
    background-image:linear-gradient(90deg,#0066ff,#00ccff);
	box-shadow: 5px 5px 8px #888888;
	}
	.handlep{
	position:absolute;
    border: 2px solid blue;
    border-radius:50%;
    background-color:white;
    background-image:url(./images/plus.png);
	background-size:cover;
	background-position:center;
	
	}
	
	.handlen{
	position:absolute;
    border: 2px solid blue;
    border-radius:50%;
    background-color:white;
    background-image:url(./images/minus.jpg);
	background-size:cover;
	background-position:center;
	
	} -->
	
	canvas {
	
	max-width:100%;
	}
	.dial {
	
position:absolute;
    border: 2px solid #060808;
    border-radius:50%;
    background-color:#060808;
    background-image:linear-gradient(90deg,#060808,#3A3B3B);
	
	box-shadow: 5px 5px 8px #D9DBDB;
}

.dialhandle {
	
position:absolute;
cursor:pointer;
background-color: #11B8C9;
  animation: glow 1s ease-in-out infinite alternate;
}
@-webkit-keyframes glow {
  from {
    text-shadow:  0 0 20px #fff, 0 0 30px #0867DF;
  }
  
  to {
    text-shadow: 0 0 20px #fff, 0 0 30px #023474;
  }
}

#dialtick1{
position:absolute;
width:50%;
left:2%;
top:4%;
}	
	
 
  </style>
  
  
</head>
<body><!--body tag start-->
    <div class="container p-3 my-3 text-primary text-center border"><!--First Container under body tag start-->
        <div class="row"><!--First row under 1st container start-->
            <div class="col-md-3"><!--First col under 1st row start-->
                <img class="img-fluid rounded" src="./images/vlabs.png" alt="VLabs logo">
            </div><!--First col under 1st row end-->
            <div class="col-md-6"><!--2nd col under 1st row start-->
                <p class="display-1"> <b> Virtual Labs <br> IIT Kharagpur </b> </p>
            </div><!--2nd col under 1st row end-->
            <div class="col-md-3"><!--3rd col under 1st row start-->
                <img class="img-fluid rounded" src="./images/iitkgp.png" alt="IIT KGP Logo" >
            </div><!--3rd col under 1st row end-->
        </div><!--First row under 1st container end-->
    
        <hr>
        <div class="row"><!--2nd row under 1st container start-->
            <div class="col-md-3"><!--First col under 2nd row start-->

            </div><!--First col under 2nd row end-->
            <div class="col-md-6"><!--2nd col under 2nd row start-->
                <p class="h1"> <b> Simulation </b> </p>
            </div><!--2nd col under 2nd row end-->
            <div class="col-md-3"><!--3rd col under 2nd row start-->

            </div><!--3rd col under 2nd row end-->
        </div><!--2nd row under 1st container end-->
        <hr>
       
    </div><!--First Container under body tag end-->
    
    
	
    <div class="container p-3 my-5 text-left border"><!--3rd Container under body tag start-->
      <div class="row"><!--First row under 3rd container start-->
        <div class="col-md-1"></div><!--First col under 3rd container start& end-->
        <div class="col-md-10"><!--2nd col under 3rd container start-->
            <p class="text-center bg-success"> <a class="nav-link" data-bs-toggle="tab" href="#inst" id="instcontrol" style="background-color:#128BD9"  ><span class=" h3 text-dark"> Instructions </span></a>
              <ol id="inst" style="display:block;z-index:1;height:190px; left:0px;overflow-y: auto;">
               
	   <li>Make wire connections as follows (x-y, drag connecting wire from point x (a blue point) and drop on point y (another blue point)):<br/>
	   1-12, 2-11, 7-6, 8-5, 4-35, 14-31, 32-18, 33-22, 34-23, 15-19, 19-23, 16-25, 20-26, 27-24, 28-23, 38-23.</li><br/>

		<li>Rotate the 'Reference Phase' variac to provide the reference phase voltage to 220 V. the corresponding box with reference phase variac shows the voltage applied.
		This will be fixed throughout the experiment. Rotate the 'Control Phase' variac to provide the control phase voltage to 220 V. the corresponding box with control phase variac shows the voltage applied.
		</li></br>
	  
	   <li>Click on 'Check Connection' button to check whether the wire connections are proper or not. If alert message is shown as 'wrong connection', 
	   examine the established connections and select the incorrectly linked wire for removal by clicking on it.</li><br/>
	 
	   <li>Click on the red switch to switch on the regulated dc power supply. Rotate the dc supply voltage knob (beside the switch)
	       to increase the voltage value to 4.9 V. The motor will run with no load speed first. The corresponding box above the motor shows the speed value
		   in rpm .</li><br/>

	   <li>There are weights (g) in the pink dotted box. Drag weights from that box to drop them on the blue dotted box, the total weight (g) value value would be shown
	        in corresponding box beside 'Chosen Weight (g)'. The weight must be chosen as follows.<br/>
			Start with 20 g, then increase the weight by 20 g like 40, 60, 80, 100, 120, 140, 160, 180 and 200 g. More than one weight may be used to increase the weight value. </li></br>

	   <li>After a weight is chosen the green water bubble in the level indicator will move from center position.
	       Rotate the 'Current' knob of regulated dc power supply, increase the current value slowly untill the green water bubble
		   comes to center position. The speed of the motor will change with the change in weights. </li></br>

	   <li> After the bubble comes to the center position and the speed of the motor gets changed, enter 1 in the 'Observation Table Number' box
	   (there will be observations for three successive control phase voltages in three different tables, for first one the number entered will be 1. It means 
	  the first table will be filled). Click on 'Show Table' button to take observation data.
	     Change the weight again (choose the next weight after 20 as said in step 5) and follow steps 5-7.</li></br>
		 
	   <li> If in any case, incorrect observation is taken mistakenly (ex: after changing the weight if observation is taken too early before the motor speed changes,
	        then there will be same data in two consecutive rows in a table. That will result in wrong plot), then click on 'Delete Row' button to delete that particular observation table row and take the reading again.</li><br/>
	 
	   <li>After changing the weights upto 200 g with control phase voltage 220 V, bring the current knob to its minimum value and
	   change the control phase voltage to 200 V and repeat the steps 5-7.
	   In this case enter 2 in the 'Observation Table Number' box (it means the second table will be filled).
	       Follow again steps 5-7 for the control phase voltage 180 V and in this case enter 3 in the 'Observation Table Number' box
		 to fill the third table .</li><br/>
	
	   <li>After taking observations for three different control phase voltages under three individual table, click on 'Plot' button to observe the 
	       Torque Vs. Speed plot.</li><br/> 
		   
	   <li>Calculate and enter the values of <span style="font-family:'Times New Roman'"><i>K</i></span> and <span style="font-family:'Bodoni MT'"><i>f</i><sub>0</sub></span> from the plot (formula for the calculation is explained in 'Theory').
	   Click on 'Transfer Function' in the pink box at the bottom of the page to see the transfer function of motor.</li><br/>

	   <li>Now bring back all the knobs and variacs to minimum value and switch off the dc regulated supply.</li><br/>
	 
	     </ol>
            </p> 
          </div><!--2nd col under 3rd container end-->
        <div class="col-md-1"></div><!--3rd col under 3rd container start& end-->
      </div><!--First row under 3rd container end-->
    </div><!--3rd Container under body tag end-->
	
    <div class="container p-3 my-5 text-center border" id="canvas" ><!--Fourth container under body tag start-->
	
		<!--<div class="row"><!---1st row under fourth container start--->
			<!--<div class="col-md-1"></div><!--1st col under 1st row start & end-->
			<!--<div class="col-md-10 "><!--2nd col under 1st row start-->
          <!-- Code Start here-->
		  <!--<ul class="nav nav-pills nav-justified " role="tablist">
            <li class="nav-item bg-success">
              <!--<a class="nav-link" data-bs-toggle="tab" href="#Strt" onclick="$('#inst').slideUp();"><span class=" h3 text-dark"> Start </span></a>-->
            <!--</li></ul>		  
		  
				<h3 class="w-auto p-2 text-center" class="text-center" style="color:#07ACE1"><b>Determination of Incremental Transfer Function of Two-Phase AC Servo Motor</b></h3>
			</div><!---end of 2ndcol under first row--->
			<!--<div class="col-md-1"></div><!--3rd col under 1st row start & end-->
		<!--</div><!---end of 1st row under fourth container-->
 
        <div class="row my-5 gy-2"><!--- 2nd row under fourth container start--->
        <div class="col-md-1"></div><!--1st col under 2nd row start & end-->
        <div class="col-md-5" ><!--2nd col under 2nd row start -->
          <!-- Code Start here--> 
        <div class="img-container"><!--img container div start-->
		<img class="img-fluid " id="dc_supply" src="images/dc supply.png " />
		<img class="img-fluid switch" id="red_switch" onclick="OnOff()" value="off" src="./images/red_switch.png " style="cursor:pointer;pointer-events:none"  />
		
		<!---knob 1 1st col 1st row--------->
		<!-- <div class="bluedot" id="knob1" style=" width:18%;height:34%;top:33%;left:20%;pointer-events:none;">
		<div class="handlep" id="knob1p" onclick="rotate1()"style="width:30%;height:30%;top:33%;left:0%;"></div>
		<div class="handlen" id="knob1n"onclick="rotate2()" style="width:30%;height:30%;top:33%;left:70%;"></div>			
		</div> -->
		<div id="knob1" class="dial"  style=" width:18%;height:34%;top:33%;left:20%;">
		<div class="dialhandle" style="width:20%;height:5%;top:85%;left:20%;transform:rotate(304deg)"></div>				
		</div>
		
		<!---knob 2 1st col 1st row--------->
		<!-- <div class="bluedot" id="knob2" style=" width:18%;height:34%;top:34%;left:52%;pointer-events:none;">
		<div class="handlep" id="knob2p" onclick="rotate3()"style="width:30%;height:30%;top:33%;left:0%;"></div>
		<div class="handlen" id="knob2n"onclick="rotate4()" style="width:30%;height:30%;top:33%;left:70%;"></div>			
		</div> -->
		<div id="knob2" class="dial"  style=" width:18%;height:34%;top:34%;left:52%;">
		<div class="dialhandle" style="width:20%;height:5%;top:85%;left:20%;transform:rotate(304deg)"></div>				
		</div>
		
		<!---knob 3 1st col 1st row--------->
		<!-- <div class="bluedot" id="knob3" style=" width:18%;height:34%;top:34%;left:73%;pointer-events:none;">
		<div class="handlep" id="knob3p" onclick="rotate5()"style="width:30%;height:30%;top:33%;left:0%;"></div>
		<div class="handlen" id="knob3n"onclick="rotate6()" style="width:30%;height:30%;top:33%;left:70%;"></div>			
		</div> -->
		<div id="knob3" class="dial"  style=" width:18%;height:34%;top:34%;left:73%;">
		<div class="dialhandle" style="width:20%;height:5%;top:85%;left:20%;transform:rotate(304deg)"></div>				
		</div>	
		
		
		<input type="number" id="dc1" min="0" max="5" step="0.1" value="0" readonly=readonly >
		<input type="number" id="dcv" min="0" max="32" step="0.1" value="0"readonly=readonly>
		<input type="number" id="dcc" min="0" max="2" step="0.1" value="0"readonly=readonly>		
		
		
			<div  id="bd1"></div> 
			<div id="bd2"></div>
   
			<span id="dotnum1">1</span>
			<span id="dotnum2">2</span>
			
			
			
  
        </div><!--img container div end-->
			<button type="button" id="check" class="btn btn-primary" >Check Connection</button>
			<!-- <button type="button"   onclick="Run2()" class="btn btn-success"  >RUN</button> -->
			<button type="button" id="plot"  onclick="plot()" class="btn btn-primary" disabled="true" >Plot</button>
			<button type="button" id="table" onclick="CreateTable()" class="btn btn-primary" disabled="true" >Show Table</button>
			<button type="button" id="tabledlt" onclick="dltRow()" class="btn btn-primary" disabled="true" >Delete Row</button>
	</div><!---end of 2nd col under 2nd row--->
	
	<!----->
        <div class="col-md-5"><!--3rd col under 2nd row start-->
          <!-- Code Start here-->
		 <div class="img-container"><!--img container div start--> 
		 <img class="img-fluid" id="motorset" onclick="incrspeed()" src="./images/motorset.png "/>
		 <span style="position:absolute;top:41%;left:15%;color:blue;"><b>Speed (rpm) :</b></span>
		 <input type="number"  value="0" id="speed"  readonly="readonly">
		 
		 <img class="img-fluid bwheel " id="bwheel"  src="./images/swheel.png "/>
		 <img class="img-fluid swheel " id="swheel"  src="./images/swheel.png "/>
		 
		 <img class="img-fluid mplate " id="mplate" onclick="" src="./images/Mplate.png "/><div id="dropDiv" ondrop="drop(event)" ondragover="allowDrop(event)" class="dropRack"></div>
		 <img class="img-fluid level " id="level" onclick="" src="./images/level.png "/>
		 <!---level indicator box------>
		<div id="waterlevel" class="box indicator">
				<span style="visibility:hidden;">B</span>
				<i></i>
		</div>
		 
		<!-----Draggable weights--------->
			<div id="dragDiv" ondrop="drop(event)" ondragover="allowDrop(event)" class="weightRack" >
		    <img id="w100" class="noDrop" name="100"draggable="true" src="./images/w1.png" draggable="true" ondragstart="drag(event)" style="position:absolute;width:27%;height:96%;top:0%;left:1%"/>
		    <img id="w50"  class="noDrop" name="50" draggable="true" src="./images/w1.png" draggable="true" ondragstart="drag(event)" style="position:absolute;width:22%;height:92%;top:0%;left:29%"/>
		    <img id="w120" class="noDrop" name="20" draggable="true" src="./images/w1.png" draggable="true" ondragstart="drag(event)" style="position:absolute;width:16%;height:90%;top:0%;left:52%"/>
		    <img id="w220" class="noDrop" name="20" draggable="true" src="./images/w1.png" draggable="true" ondragstart="drag(event)" style="position:absolute;width:16%;height:90%;top:0%;left:69%"/>
		    <img id="w10"  class="noDrop" name="10" draggable="true" src="./images/w1.png" draggable="true" ondragstart="drag(event)" style="position:absolute;width:11%;height:74%;top:12%;left:86%"/>
		    <!--<img id="w5"   draggable="true" src="./images/w1.png" draggable="true" ondragstart="drag(event)" style="position:absolute;width:25%;height:59%;top:47%;left:80%"/>-->
			</div>
			
			
			 <!--<span id="w5s" style="position:absolute;top:81%;left:96%;color:blue;"  ><b>5 </b></span>-->
			 <span class="w-auto" id="w10s" style="position:absolute;top:81%;left:93%;color:blue;" ><b>10</b></span>
			 <span class="w-auto" id="w120s" style="position:absolute;top:59%;left:87%;color:blue;"><b>20</b></span>
			 <span class="w-auto" id="w220s" style="position:absolute;top:81%;left:81%;color:blue;"><b>20</b></span>
			 <span class="w-auto" id="w50s" style="position:absolute;top:59%;left:73%;color:blue;" ><b>50</b></span>
			 <span class="w-auto" id="w100s" style="position:absolute;top:81%;left:62%;color:blue;"><b>100</b></span>
		     <span class="w-auto" id="Tmass" style="position:absolute;top:100%;left:27%;color:blue;"><b>Chosen Weight (g)</b></span>
			 <input class="text-center" type="number" id="Tmassv" value="0" style="position:absolute;top:100%;left:60%;color:blue;width:20%;" readonly=readonly>
		 
			 <div id="bd3"></div>
			 <div id="bd4"></div>
			 <div id="bd5"></div>
			 <div id="bd6"></div>			 
			 <div id="bd11"></div>
			 <div id="bd12"></div>
			 
			 <span id="dotnum3">3</span>
			 <span id="dotnum4">4</span>
			 <span id="dotnum5">5</span>
			 <span id="dotnum6">6</span>
			 <span id="dotnum11">11</span>
			 <span id="dotnum12">12</span>
			 
         </div><!--img container div end-->
		 
	</div><!---end of 3rd col under 2nd row--->	
	<div class="col-md-1"></div><!--4th col under 2nd row start & end-->  

	

	
        </div><!--2nd row under fourth container end-->

 <div class="row my-5 gy-2"><!--- 3rd row under fourth container start--->
        <div class="col-md-1"></div><!--1st col under 3rd row start & end-->
        <div class="col-md-5 "><!--2nd col under 3rd row start -->
          <!-- Code Start here-->
			<div class="img-container"><!--img container div start-->
				<span style="position:absolute;top:-8%;left:7%;color:blue;"><b>Control phase variac</b></span>
				<img class="img-fluid" id="conampset" src="images/con_amp_set.png"/>
				
				<img id="dialtick1" src="images/dial.png"/>			
				
				
				<span style="position:absolute;top:99%;left:5%;color:blue;"><b>Control phase voltage (V) :</b></span><input type="number" id="conph" min="0" max="260" step="10" value="0" readonly=readonly>
				
				
		<!---------------------------------------------------------------------------------------------------------End of Trial----------------------------------------------------------------------------->		
				<div id="knob4" class="dial"  style="width:30%;height:42.8%;top:17%;left:11.8%;">
				<div class="dialhandle" style="width:20%;height:5%;top:85%;left:20%;transform:rotate(304deg)"></div>				
				</div>
				
				<div id="bd7"></div>
			    <div id="bd8"></div>
				<div id="bd9" style="visibility:hidden;"></div>
			    <div id="bd10" style="visibility:hidden;"></div>
				
				<span id="dotnum7">7</span>
				<span id="dotnum8">8</span>
				<!--<span id="dotnum9">9</span>
				<span id="dotnum10">10</span>-->				
				
			</div>
	    </div><!--2nd col under 3rd row  end-->
	
        <div class="col-md-5 "><!--3rd col under 3rd row start -->
          <!-- Code Start here-->
			<div class="img-container">
			    <span style="position:absolute;top:-5%;left:-2%;color:blue;"><b>Reference phase variac</b></span>
				<img class="img-fluid" id="refphset" src="images/ref_ph_set.png "/>
				
				<div class="text-center" style="position:absolute;width:27%;height:7%;top:69%;left:68%;border:2px solid black;background-color:#e5e576;">
				
				</div>
				
				<span style="position:absolute;top:99%;left:-6%;color:blue;"><b>Reference phase voltage (V) :</b></span><input type="number" id="refph" min="0" max="260" step="10" value="0" readonly="readonly">
				
				<!-- <div class="bluedot" id="knob5" style=" width:23%;height:16%;top:1%;left:14%;">
				<div class="handlep" id="knob5p" onclick="rotate9()"style="width:30%;height:30%;top:33%;left:0%;"></div>
				<div class="handlen" id="knob5n"onclick="rotate10()" style="width:30%;height:30%;top:33%;left:70%;"></div>			
				</div> -->
				<div id="knob5" class="dial"  style=" width:23%;height:16%;top:1%;left:14%;">
				<div class="dialhandle" style="width:20%;height:5%;top:85%;left:20%;transform:rotate(304deg)"></div>				
				</div>
				
		
				<img class="img-fluid" id="mcb" src="images/mcb_on.jpg "/>
		
		
				
				<div id="bd13"></div>
				<div id="bd14"></div>
				<div id="bd15"></div>
				<div id="bd16"></div>
				
				<div id="bd17"></div>
				<div id="bd18"></div>
				<div id="bd19"></div>
				<div id="bd20"></div>
				
				<div id="bd21"></div>
				<div id="bd22"></div>
				<div id="bd23"></div>
				<div id="bd24"></div>
				
				<div id="bd25"></div>
				<div id="bd26"></div>
				<div id="bd27"></div>
				<div id="bd28"></div>
				<div id="bd29"></div>
				<div id="bd30"></div>
				
				<div id="bd31"></div>
				<div id="bd32"></div>
				<div id="bd33"></div>
				<div id="bd34"></div>
				
				<div id="bd35"></div>
				<div id="bd36"></div>
				<div id="bd37"></div>
				<div id="bd38"></div>

				<span id="dotnum13">13</span>
				<span id="dotnum14">14</span>
				<span id="dotnum15">15</span>
				<span id="dotnum16">16</span>
				<span id="dotnum17">17</span>
				<span id="dotnum18">18</span>
				<span id="dotnum19">19</span>
				<span id="dotnum20">20</span>
				<span id="dotnum21">21</span>
				<span id="dotnum22">22</span>
				<span id="dotnum23">23</span>
				<span id="dotnum24">24</span>
				<span id="dotnum25">25</span>
				<span id="dotnum26">26</span>
				<span id="dotnum27">27</span>
				<span id="dotnum28">28</span>
				<span id="dotnum29">29</span>
				<span id="dotnum30">30</span>
				<span id="dotnum31">31</span>
				<span id="dotnum32">32</span>
				<span id="dotnum33">33</span>
				<span id="dotnum34">34</span>
				<span class="w-auto" id="dotnum35">35</span>
				<span class="w-auto" id="dotnum36">36</span>
				<span class="w-auto" id="dotnum37">37</span>
				<span class="w-auto" id="dotnum38">38</span>
				
			</div><!--img-container end-->	
		</div><!--3rd col under 3rd row  end-->	
			<div class="col-md-1"></div><!--4th col under 3rd row start & end-->   
		</div><!--3rd row under fourth container end-->
        
	<div class="row my-5 gy-2"><!--- 4th row under fourth container start--->
        <div>
		
		Observation Table Number :&nbsp;<input type="number" id ="obsn" min="0" value="0" max="3" style="text-align:center">
		</div>
        <div class="col-md-4 "><!--1st col under 4th row start -->	
			<table id="T1" style="width:80%">
			
				<tr>
					<th colspan="5">Ec = <input type="number" id ="Vvalue1" value="0" readonly=readonly style="text-align:center;width: 30%;">&nbsp;V</th>
				</tr>
				  <tr>
					<th>Sl No.</th>
					<th>Weight(g)</th> 
					<th>Speed(rpm)</th>
					<th>Speed(rad/s)</th>
					<th>Torque</th>
				  </tr>
				  
			</table>		
		</div><!--1st col under 4th row end -->
		
		<div class="col-md-4 "><!--2nd col under 4th row start -->
				
			<table id="T2" style="width:80%">
			
				<tr>
					<th colspan="5">Ec = <input type="number" id ="Vvalue2" value="0" readonly=readonly style="text-align:center;width: 30%;">&nbsp;V</th>
				</tr>
				  <tr>
					<th>Sl No.</th>
					<th>Weight(g)</th> 
					<th>Speed(rpm)</th>
					<th>Speed(rad/s)</th>
					<th>Torque</th>
				  </tr>
				  
			</table>	
		</div><!--2nd col under 4th row end -->
		
		<div class="col-md-4 "><!--3rd col under 4th row start -->	
			<table id="T3" style="width:80%">
			
				<tr>
					<th colspan="5">Ec = <input type="number" id ="Vvalue3" value="0" readonly=readonly style="text-align:center;width: 30%;">&nbsp;V</th>
				</tr>
				  <tr>
					<th>Sl No.</th>
					<th>Weight(g)</th> 
					<th>Speed(rpm)</th>
					<th>Speed(rad/s)</th>
					<th>Torque</th>
				  </tr>
				  
			</table>	
		</div><!--3rd col under 4th row end -->		
		
	</div><!--- 4th row under fourth container end--->	


	 <div class="row justify-content-center my-2"><!-----------------------graph T vs. w----------------------------------------->
		<div class="col-md-2"></div>
	 
			<div class="col-md-8">
				<div id = "plotbucket" class="content-center" style="display:none; position relative; border:3px solid none;height:500px;width:600px;">
				<button type="button" id="exportChart" class="btn btn-primary"  style="display:none;position:absolute;">Download Plot</button>
				<br/><br/><div id="chartContainer"  style="display:none; position:absolute; height: 42%; width: 40%; "></div> 
				</div>
			</div>
		<div class="col-md-2"></div>
	</div><br/>	

	 <div class="row justify-content-center my-2"><!-----------------------Transfer Function----------------------------------------->
		<div class="col-md-2"></div>
	 
			<div class="col-md-8">
				<!-- <div id = "tfbucket" class="content-center img-container" style=" border:3px solid blue;width:80%;">
				<button type="button" id="showTF" class="btn btn-primary" onclick="TF()" style="display:block;position:absolute;">Transfer Function</button>
				<br><br>
				<b >G<sub>m</sub>(s)</b> = <input type="number" id="tfn" style="position:absolute;width:15%;height:20%;left:62%;top:20%"><hr style="position:absolute;width:30%;left:56%;top:30%"><br><br>
				<span style="position:absolute;left:56%;top:51%"><b>s</b>[</span><input type="number" id="tfd" style="position:absolute;width:15%;height:20%;left:58.5%;top:56%"> <span style="position:absolute;left:75%;top:56%"><b>s +1]</b></span>
					 -->
			<div class="card" style=" width:100%;background-color:pink" > 
  
			<span class="card-title bg-light" id="showTF"  onclick="TF()"> Transfer Function</span><br/>
				<span class="card-text">Enter the value of <i style="font-family:'Times New Roman'">k</i> &nbsp;<input  type="number" id="kgain" value="0"  style="width:15%;text-align:center"></span><br/>
				<span class="card-text">Enter the value of <i style="font-family:'Times New Roman'">f<sub>0</sub></i> &nbsp;<input  type="number" id="fo" value="0"  style="width:15%;text-align:center"></span><br/>
				
				
			<span class="card-text" ><b style="position:absolute;width: 25%;left: 18%;top: 71%;">G<sub>m</sub> (s) =</b> &nbsp;<input  type="number" id="tfn" value="0" readonly=readonly style="width:15%;text-align:center"></span><br/>
			
			<span  class="card-text" ><b>s</b>&nbsp;&nbsp;[&nbsp;&nbsp;<input type="number" id="tfd" value="0" readonly=readonly style="width:15%;text-align:center">&nbsp;&nbsp;<b>s +1&nbsp;&nbsp;]</b></span>
			<hr  style="position:absolute;width: 25%;left: 38%;top: 70%;">
   <br/>
			</div>
  
				</div>
			
		<div class="col-md-2"></div>
	</div>	
	
          <!-- Code End here-->
        </div><!--Fourth container under body tag end-->
          
      <!--</div>
    </div>-->

    <div class="container p-3 my-5 text-primary text-center border"><!--Last and fifth container under body tag start-->
      <div class="row">
        <footer>
          <div class="row ce">
            <div class="col-sm-12">
              <p class="h5"><i> Copyright Â©2022 <a href="http://vlabs.iitkgp.ac.in/vlt/">Virtual Labs IIT Kharagpur</a> </i><br><br>
              <a href="../../license/index.html" target="_blank"> Licensing Terms </a>
            </p>
            </div>
          </div>
        </footer>
      </div>
  </div><!--Last and fifth container under body tag end-->
  
   
	<script>

var knobPositionX;
      var knobPositionY;
      var mouseX;
      var mouseY;
      var knobCenterX;
      var knobCenterY;
      var adjacentSide;
      var oppositeSide;
      var currentRadiansAngle;
      var getRadiansInDegrees;
      var finalAngleInDegrees;
      var volumeSetting;
      //var tickHighlightPosition;
      //var audio = new Audio("https://www.cineblueone.com/maskWall/audio/skylar.mp3"); //Celine Dion's "Ashes"
      //var startingTickAngle = -135;
      //var tickContainer = document.getElementById("tickContainer");
      var knob1 = document.getElementById("knob4");//control phase knob
	  var knob2 = document.getElementById("knob1");//dc regulator 1st knob
	  var knob3 = document.getElementById("knob2");//dc regulator 2nd knob
	  var knob4 = document.getElementById("knob3");// dc regulator 3rd knob
	  var knob5 = document.getElementById("knob5");// Reference phase knob
	   
      var boundingRectangle1 = knob1.getBoundingClientRect(); //get rectangular geometric data of knob (x, y, width, height)
	  var boundingRectangle2 = knob2.getBoundingClientRect();
	  var boundingRectangle3 = knob3.getBoundingClientRect();
	  var boundingRectangle4 = knob4.getBoundingClientRect();
	  var boundingRectangle5 = knob5.getBoundingClientRect();

      function main1()
      {
          knob1.addEventListener(getMouseDown(), onMouseDown1); //listen for mouse button click
          document.addEventListener(getMouseUp(), onMouseUp1); //listen for mouse button release
	  }
	  function main2()
      {
          knob2.addEventListener(getMouseDown(), onMouseDown2); //listen for mouse button click
          document.addEventListener(getMouseUp(), onMouseUp2); //listen for mouse button release
	  }
	  function main3()
      {
          knob3.addEventListener(getMouseDown(), onMouseDown3); //listen for mouse button click
          document.addEventListener(getMouseUp(), onMouseUp3); //listen for mouse button release
	  }
	  function main4()
      {
          knob4.addEventListener(getMouseDown(), onMouseDown4); //listen for mouse button click
          document.addEventListener(getMouseUp(), onMouseUp4); //listen for mouse button release
	  }
	  function main5()
      {
          knob5.addEventListener(getMouseDown(), onMouseDown5); //listen for mouse button click
          document.addEventListener(getMouseUp(), onMouseUp5); //listen for mouse button release
	  }

      //on mouse buttons down
      function onMouseDown1()
      {
	  document.addEventListener(getMouseMove(), onMouseMove1); //start drag
      }	  
	  function onMouseDown2()
      {
	  document.addEventListener(getMouseMove(), onMouseMove2); //start drag
      }
	  function onMouseDown3()
      {
	  document.addEventListener(getMouseMove(), onMouseMove3); //start drag
      }
	  function onMouseDown4()
      {
	  document.addEventListener(getMouseMove(), onMouseMove4); //start drag
      }
	  function onMouseDown5()
      {
	  document.addEventListener(getMouseMove(), onMouseMove5); //start drag
      }

      //on mouse buttons release
      function onMouseUp1()
      {
          document.removeEventListener(getMouseMove(), onMouseMove1); //stop drag
      }
	  function onMouseUp2()
      {
          document.removeEventListener(getMouseMove(), onMouseMove2); //stop drag
      }
	  function onMouseUp3()
      {
          document.removeEventListener(getMouseMove(), onMouseMove3); //stop drag
      }
	  function onMouseUp4()
      {
          document.removeEventListener(getMouseMove(), onMouseMove4); //stop drag
      }
	  function onMouseUp5()
      {
          document.removeEventListener(getMouseMove(), onMouseMove5); //stop drag
      }

      //compute mouse angle relative to center of volume knob
      //For clarification, see my basic trig explanation at:
      //https://www.quora.com/What-is-the-significance-of-the-number-pi-to-the-universe/answer/Kevin-Lam-15
      function onMouseMove1(event)
      {	  
          knobPositionX = boundingRectangle1.left; //get knob's global x position
          knobPositionY = boundingRectangle1.top; //get knob's global y position

          if(detectMobile() == "desktop")
          {
              mouseX = event.pageX; //get mouse's x global position
              mouseY = event.pageY; //get mouse's y global position
          } else {
              mouseX = event.touches[0].pageX; //get finger's x global position
              mouseY = event.touches[0].pageY; //get finger's y global position
          }

          knobCenterX = boundingRectangle1.width / 2 + knobPositionX; //get global horizontal center position of knob relative to mouse position
          knobCenterY = boundingRectangle1.height / 2 + knobPositionY; //get global vertical center position of knob relative to mouse position

          adjacentSide = knobCenterX - mouseX; //compute adjacent value of imaginary right angle triangle
          oppositeSide = knobCenterY - mouseY; //compute opposite value of imaginary right angle triangle

          //arc-tangent function returns circular angle in radians
          //use atan2() instead of atan() because atan() returns only 180 degree max (PI radians) but atan2() returns four quadrant's 360 degree max (2PI radians)
          currentRadiansAngle = Math.atan2(adjacentSide, oppositeSide);

          getRadiansInDegrees = currentRadiansAngle * 180 / Math.PI; //convert radians into degrees

          finalAngleInDegrees = -(getRadiansInDegrees - 135); //knob is already starting at -135 degrees due to visual design so 135 degrees needs to be subtracted to compensate for the angle offset, negative value represents clockwise direction

          //only allow rotate if greater than zero degrees or lesser than 270 degrees
          if(finalAngleInDegrees >= 0 && finalAngleInDegrees <= 300)
          {
              knob1.style.transform = "rotate(" + finalAngleInDegrees + "deg)"; //use dynamic CSS transform to rotate volume knob

              //270 degrees maximum freedom of rotation / 100% volume = 1% of volume difference per 2.7 degrees of rotation
              volumeSetting = Math.round(finalAngleInDegrees / (300 / 100));
              var voltValue = volumeSetting * (220/100); 
              document.getElementById("conph").value = math.round(voltValue) ;//+ "%"; //update volume text
          }
      }

///knob2/////
function onMouseMove2(event)
      {
          knobPositionX = boundingRectangle2.left; //get knob's global x position
          knobPositionY = boundingRectangle2.top; //get knob's global y position

          if(detectMobile() == "desktop")
          {
              mouseX = event.pageX; //get mouse's x global position
              mouseY = event.pageY; //get mouse's y global position
          } else {
              mouseX = event.touches[0].pageX; //get finger's x global position
              mouseY = event.touches[0].pageY; //get finger's y global position
          }

          knobCenterX = boundingRectangle2.width / 2 + knobPositionX; //get global horizontal center position of knob relative to mouse position
          knobCenterY = boundingRectangle2.height / 2 + knobPositionY; //get global vertical center position of knob relative to mouse position

          adjacentSide = knobCenterX - mouseX; //compute adjacent value of imaginary right angle triangle
          oppositeSide = knobCenterY - mouseY; //compute opposite value of imaginary right angle triangle

          //arc-tangent function returns circular angle in radians
          //use atan2() instead of atan() because atan() returns only 180 degree max (PI radians) but atan2() returns four quadrant's 360 degree max (2PI radians)
          currentRadiansAngle = Math.atan2(adjacentSide, oppositeSide);

          getRadiansInDegrees = currentRadiansAngle * 180 / Math.PI; //convert radians into degrees

          finalAngleInDegrees = -(getRadiansInDegrees - 135); //knob is already starting at -135 degrees due to visual design so 135 degrees needs to be subtracted to compensate for the angle offset, negative value represents clockwise direction

          //only allow rotate if greater than zero degrees or lesser than 270 degrees
          if(finalAngleInDegrees >= 0 && finalAngleInDegrees <= 300)
          {
              knob2.style.transform = "rotate(" + finalAngleInDegrees + "deg)"; //use dynamic CSS transform to rotate volume knob

              //270 degrees maximum freedom of rotation / 100% volume = 1% of volume difference per 2.7 degrees of rotation
              volumeSetting = Math.floor(finalAngleInDegrees / (300 / 100));
				var voltValue = volumeSetting * (5/100); 
              document.getElementById("dc1").value = math.floor(voltValue * 10)/10 ;
              
             // document.getElementById("volumeValue").innerHTML = volumeSetting + "%"; //update volume text
          }
      }
	  
	  ///knob3/////
function onMouseMove3(event)
      {
          knobPositionX = boundingRectangle3.left; //get knob's global x position
          knobPositionY = boundingRectangle3.top; //get knob's global y position

          if(detectMobile() == "desktop")
          {
              mouseX = event.pageX; //get mouse's x global position
              mouseY = event.pageY; //get mouse's y global position
          } else {
              mouseX = event.touches[0].pageX; //get finger's x global position
              mouseY = event.touches[0].pageY; //get finger's y global position
          }

          knobCenterX = boundingRectangle3.width / 2 + knobPositionX; //get global horizontal center position of knob relative to mouse position
          knobCenterY = boundingRectangle3.height / 2 + knobPositionY; //get global vertical center position of knob relative to mouse position

          adjacentSide = knobCenterX - mouseX; //compute adjacent value of imaginary right angle triangle
          oppositeSide = knobCenterY - mouseY; //compute opposite value of imaginary right angle triangle

          //arc-tangent function returns circular angle in radians
          //use atan2() instead of atan() because atan() returns only 180 degree max (PI radians) but atan2() returns four quadrant's 360 degree max (2PI radians)
          currentRadiansAngle = Math.atan2(adjacentSide, oppositeSide);

          getRadiansInDegrees = currentRadiansAngle * 180 / Math.PI; //convert radians into degrees

          finalAngleInDegrees = -(getRadiansInDegrees - 135); //knob is already starting at -135 degrees due to visual design so 135 degrees needs to be subtracted to compensate for the angle offset, negative value represents clockwise direction

          //only allow rotate if greater than zero degrees or lesser than 270 degrees
          if(finalAngleInDegrees >= 0 && finalAngleInDegrees <= 300)
          {
              knob3.style.transform = "rotate(" + finalAngleInDegrees + "deg)"; //use dynamic CSS transform to rotate volume knob

              //270 degrees maximum freedom of rotation / 100% volume = 1% of volume difference per 2.7 degrees of rotation
              volumeSetting = Math.floor(finalAngleInDegrees / (300 / 100));
				var voltValue = volumeSetting * (32/100); 
              document.getElementById("dcv").value = math.round(voltValue) ;
              
             // document.getElementById("volumeValue").innerHTML = volumeSetting + "%"; //update volume text
          }
      }
	  
	  ///knob4/////
function onMouseMove4(event)
      {
          knobPositionX = boundingRectangle4.left; //get knob's global x position
          knobPositionY = boundingRectangle4.top; //get knob's global y position

          if(detectMobile() == "desktop")
          {
              mouseX = event.pageX; //get mouse's x global position
              mouseY = event.pageY; //get mouse's y global position
          } else {
              mouseX = event.touches[0].pageX; //get finger's x global position
              mouseY = event.touches[0].pageY; //get finger's y global position
          }

          knobCenterX = boundingRectangle4.width / 2 + knobPositionX; //get global horizontal center position of knob relative to mouse position
          knobCenterY = boundingRectangle4.height / 2 + knobPositionY; //get global vertical center position of knob relative to mouse position

          adjacentSide = knobCenterX - mouseX; //compute adjacent value of imaginary right angle triangle
          oppositeSide = knobCenterY - mouseY; //compute opposite value of imaginary right angle triangle

          //arc-tangent function returns circular angle in radians
          //use atan2() instead of atan() because atan() returns only 180 degree max (PI radians) but atan2() returns four quadrant's 360 degree max (2PI radians)
          currentRadiansAngle = Math.atan2(adjacentSide, oppositeSide);

          getRadiansInDegrees = currentRadiansAngle * 180 / Math.PI; //convert radians into degrees

          finalAngleInDegrees = -(getRadiansInDegrees - 135); //knob is already starting at -135 degrees due to visual design so 135 degrees needs to be subtracted to compensate for the angle offset, negative value represents clockwise direction

          //only allow rotate if greater than zero degrees or lesser than 270 degrees
          if(finalAngleInDegrees >= 0 && finalAngleInDegrees <= 300)
          {
              knob4.style.transform = "rotate(" + finalAngleInDegrees + "deg)"; //use dynamic CSS transform to rotate volume knob

              //270 degrees maximum freedom of rotation / 100% volume = 1% of volume difference per 2.7 degrees of rotation
              volumeSetting = Math.floor(finalAngleInDegrees / (300 / 100));
				var voltValue = volumeSetting * (2.5/100); 
              document.getElementById("dcc").value = math.floor(voltValue * 10)/10 ;
              LevelIndicate();
             // document.getElementById("volumeValue").innerHTML = volumeSetting + "%"; //update volume text
          }
      }
	  
	  ///knob5/////
function onMouseMove5(event)
      {
          knobPositionX = boundingRectangle5.left; //get knob's global x position
          knobPositionY = boundingRectangle5.top; //get knob's global y position

          if(detectMobile() == "desktop")
          {
              mouseX = event.pageX; //get mouse's x global position
              mouseY = event.pageY; //get mouse's y global position
          } else {
              mouseX = event.touches[0].pageX; //get finger's x global position
              mouseY = event.touches[0].pageY; //get finger's y global position
          }

          knobCenterX = boundingRectangle5.width / 2 + knobPositionX; //get global horizontal center position of knob relative to mouse position
          knobCenterY = boundingRectangle5.height / 2 + knobPositionY; //get global vertical center position of knob relative to mouse position

          adjacentSide = knobCenterX - mouseX; //compute adjacent value of imaginary right angle triangle
          oppositeSide = knobCenterY - mouseY; //compute opposite value of imaginary right angle triangle

          //arc-tangent function returns circular angle in radians
          //use atan2() instead of atan() because atan() returns only 180 degree max (PI radians) but atan2() returns four quadrant's 360 degree max (2PI radians)
          currentRadiansAngle = Math.atan2(adjacentSide, oppositeSide);

          getRadiansInDegrees = currentRadiansAngle * 180 / Math.PI; //convert radians into degrees

          finalAngleInDegrees = -(getRadiansInDegrees - 135); //knob is already starting at -135 degrees due to visual design so 135 degrees needs to be subtracted to compensate for the angle offset, negative value represents clockwise direction

          //only allow rotate if greater than zero degrees or lesser than 270 degrees
          if(finalAngleInDegrees >= 0 && finalAngleInDegrees <= 300)
          {
              knob5.style.transform = "rotate(" + finalAngleInDegrees + "deg)"; //use dynamic CSS transform to rotate volume knob

              //270 degrees maximum freedom of rotation / 100% volume = 1% of volume difference per 2.7 degrees of rotation
              volumeSetting = Math.floor(finalAngleInDegrees / (300 / 100));
				var voltValue = volumeSetting * (222/100); 
              document.getElementById("refph").value = math.round(voltValue) ;
          }
      }
    
      //detect for mobile devices from https://www.sitepoint.com/navigator-useragent-mobiles-including-ipad/
      function detectMobile()
      {
          var result = (navigator.userAgent.match(/(iphone)|(ipod)|(ipad)|(android)|(blackberry)|(windows phone)|(symbian)/i));

          if(result !== null)
          {
              return "mobile";
          } else {
              return "desktop";
          }
      }

      function getMouseDown()
      {
          if(detectMobile() == "desktop")
          {
              return "mousedown";
          } else {
              return "touchstart";
          }
      }

      function getMouseUp()
      {
          if(detectMobile() == "desktop")
          {
              return "mouseup";
          } else {
              return "touchend";
          }
      }

      function getMouseMove()
      {
          if(detectMobile() == "desktop")
          {
              return "mousemove";
          } else {
              return "touchmove";
          }
      }

      main1();
	  main2();
	  main3();
	  main4();
	  main5();

</script>
<script src="./js/jsPlumb.js"></script>	
	<script src="./js/demo.js"> </script>	
</body><!--body tag end-->
</html><!--html tag end-->
